<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
	<title>Cryptopay demon service</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="./assets/bootstrap.min.css" rel="stylesheet">
	<link href="./assets/main.css" rel="stylesheet" type="text/css">
	<link href="./assets/style.css" rel="stylesheet">
</head>

<body>
	<header class="main__header">
		<div class="container">
			<nav class="navbar navbar-default" role="navigation">
				<div class="menuBar">
					<ul class="menu">
						<li class="active"><a>Home</a></li>
						<li><a>Pages</a></li>
						<li><a>left sidebar</a></li>
					</ul>
					<ul class="menu m_right">
						<li><a>right sidebar</a></li>
						<li><a>full page</a></li>
						<li><a>contact us</a></li>
					</ul>
				</div>
				<div class="navbar-header">
					<h1 class="navbar-brand">
						<a>gambling</a>
					</h1>
				</div>
			</nav>
		</div>
	</header>
	<section class="slider">
		<div id="myCarousel" class="carousel slide carousel-fade" data-ride="carousel">
			<div class="carousel-inner">
				<div class="item">
					<img data-src="images/slider/slider.jpg" alt="First slide" src="./assets/slider.jpg">
					<div class="container">
						<div class="carousel-caption"></div>
					</div>
				</div>
				<div class="item">
					<img data-src="images/slider/slider1.jpg" alt="Second slide" src="./assets/slider1.jpg">
				</div>
				<div class="item active"> <img data-src="images/slider/slider2.jpg" alt="Third slide" src="./assets/slider2.jpg">
				</div>
			</div>
			<div class="form-container">
				<h1 class="page_title" >Make deposit</h1>
				<div class="form-wrapper">
					<a id="make-eur-deposit" class="btn btn-default btn-lg">EUR deposit</a>
					<select class="custom-select" id="deposit-amount">
						<option class="custom-select-options" value="5">5</option>
						<option class="custom-select-options" value="10">10</option>
						<option class="custom-select-options" value="25">25</option>
						<option class="custom-select-options" value="50">50</option>
						<option class="custom-select-options" value="100">100</option>
					</select>
					<a id="make-usd-deposit" class="btn btn-default btn-lg">USD deposit</a>
				</div>
			</div>
		</div>
	</section>
	<section class="main__middle__container homepage">
		<div class="row headings text-center no-margin nothing">
			<div class="container">
				<h1 class="page_title">Cryptopay demo service</h1>
				<p>Some information about service capabilities.</p>
				<p><a class="btn btn-default btn-lg" href="http://google.com" role="button">Tell me more</a></p>
			</div>
		</div>
	</section>
	<section class="main__middle__container">
		<p class="text-center copyright">&copy; Copyright Cryptopay. All Rights Reserved.</p></section>
	</section>
	<script type="text/javascript" src="./assets/jquery.min.js"></script>
	<script src="./assets/bootstrap.min.js"></script>
	<script type="text/javascript">
		$('.carousel').carousel({
			interval: 3500,
			pause: 'none'
		});
	</script>

	<!--Start Cryptopay widget handler-->
	<script type="text/javascript">
		const makeUSDDepositButton = document.querySelector('#make-usd-deposit');
		const makeEURDepositButton = document.querySelector('#make-eur-deposit');
		const depositAmountSelect = document.querySelector('#deposit-amount');

		makeUSDDepositButton.addEventListener('click', async () => {
			const amount = depositAmountSelect.value;
			const { paymentURL } = await getPaymentURL('USD', amount);
			window.open(paymentURL);
		});

		makeEURDepositButton.addEventListener('click', async () => {
			const amount = depositAmountSelect.value;
			const { paymentURL } = await getPaymentURL('EUR', amount);
			window.open(paymentURL);
		});
		
		async function getPaymentURL(currency, amount) {
			const currentHost = window.location.origin;
			const response = await fetch(`${currentHost}/api`, {
				method: 'POST',
				headers: {
      				'Content-Type': 'application/json'
    			},
				body: JSON.stringify({
					currency,
					amount,
				}),
			});
			const json = await response.json();
			
			if (json.error) {
				throw new Error(json.error);
			}
			return json;
		}
	</script>
	<!--End Cryptopay widget handler-->
</body>
</html>